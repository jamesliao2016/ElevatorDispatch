# ElevatorDispatch
操作系统－电梯调度模拟
＃＃　一、系统概述
### 1.1需求分析
运用操作系统进程管理的知识，结合操作系统调度算法，模拟电梯调度的功能。本电梯模拟系统有5个电梯，共20层楼。每个电梯在每一层有一个操作面板，往上和往下按钮以及显示当前楼层。每次按下按钮，五部电梯同时响应，将执行调度算法，选择最优电梯进行调度，调度过程可变，总是选择最优电梯进行调度，尽可能模拟真实电梯情况。考虑到电梯运行当中可能会出现操作不及时(模拟拥挤等情况)而造成的调度延时，在此基础上采用先到先服务的调度。保证最快服务用户。另外添加设置电梯移动速度和自动等待时间设置

### 1.2系统功能
#### 1.2.1基础功能
共5个电梯，20层楼，每个电梯在每层楼有两个按钮，表示往上和往下请求，显示当前楼层的面板。每个电梯顶部显示电梯当前的状态。电梯内部有一个控制面板，用户进入后才能选择楼层，另设开门关门键，表示电梯开门，关门操作。在不执行开门关门时，电梯会在设定时间间隔内自动执行,若操作有悖逻辑，则会出现错误提醒。
#### 1.2.2 核心功能
调度先以方向优先，优先调度同方向或者空任务电梯，计算每个满足条件的电梯到达任务楼层的最短时间，返回所需时间最短的电梯加入到任务队列中。另外再设置楼层等待队列，若一个电梯在执行任务过程中，所经楼层有同方向的任务，则把此任务加到自己的队列中，并把此任务从其初始调度电梯的任务队列中删除，初始电梯继续执行其他任务，若没有其它任务则停靠在最近的楼层。

### 1.3开发环境
该系统使用C# WPF	进行开发, VS 2015作为开发工具， 运行在Window系统上。

## 二、关键技术
### 2.1调度算法	
#### 2.1.1 优先级调度算法
		算法简介：计算电梯当前所在楼层理论上到当前楼层的时间
同方向：时间T = 楼层间隔数Fc * 权重P1 + 两楼层间任务数Wc * 权重P2;  
不同方向：时间T = 电梯当前任务最小(最大)楼层与当前楼层间隔 Fc * 2 * 权重P1 + 电梯任务数 Wc * P2;
		获取最短时间的电梯队列，再从其中选出与任务最近的电梯进行调度
		备注：主要代码：



例：若5部电梯均在1楼，第五个电梯五楼有往上的任务，则会调用第五个电梯。
### 2.1.2抢占式调度算法
算法简介： 存在一个楼层任务队列，记录楼层等待请求。正在执行任务的电梯经过每一个楼层均会检查该楼层是否有正在等待的任务(该任务被其它电梯调度)，则优先执行任务，并删除其他电梯中的此任务。
主要代码：


例：某一状态下，电梯一正在执行往下的任务，到10层发现有一个被电梯2调度的任务，则会去执行这个任务，从电梯2中删除10楼的任务。
